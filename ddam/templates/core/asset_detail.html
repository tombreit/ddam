{% extends '_base.html' %}
{% load humanize %}
{% load static %}

{% block title %}
    Asset {{ asset.title }}
{% endblock %}

{% block body_class %} asset-detail {% endblock %}

{% block content %}

{% include 'core/includes/title_row.html' with heading="Asset" editurl="core:asset-update" objid=asset.pk %}

<div class="d-flex flex-wrap mt-4">
    <div class="flex-md-shrink-1 me-4">
        {% include 'core/includes/asset_img.html' %}
    </div>
    <div class="flex-md-grow-1">
        <p>
            <span class="text-muted">
                Title
            </span>
            <br>
            <strong>
                {{ asset.title }}
            </strong>
            <br>
            {{ asset.description }}
        </p>
        <p>
            <span class="text-muted">
                Usage
            </span>
            <br>
            {% for usage in asset.get_usage_with_count %}
                {% include 'core/includes/tag.html' with obj=usage %}
            {% empty %}
                n/a
            {% endfor %}
        </p>
        <div>
            <span class="text-muted">
                Meta
            </span>
            <div class="small text-muted">
                Filesize: <span class="font-monospace">{{ asset.file.size | filesizeformat }}</span>
                <br>
                Orig filename: <span class="font-monospace">{{ asset.filename_orig }}</span>
                {% if asset.source_url %}
                <br>
                <a href="{{ asset.source_url }}" title="{{ asset.source_url }}">
                    <i class="bi bi-file-binary"></i> Source URL
                </a>
                {% endif %}
                <br>
                {% include 'core/includes/asset_audit.html' with action='uploaded' timestamp=asset.created_at by=asset.created_by %}
                <br>
                {% include 'core/includes/asset_audit.html' with action='updated' timestamp=asset.updated_at by=asset.updated_by %}
            </div>
        </div>

    </div>
    <div class="flex-md-grow-1">
        <p>
            <span class="text-muted">
                <i class="bi bi-signpost-split"></i>
                Licence
            </span>
            <br>
            <span class="text-muted">
                {% if asset.licence %}
                <a href="{% url 'core:licence-detail' asset.licence.pk %}">
                    {{ asset.licence }}
                </a>
                {% else %}
                    n/a
                {% endif %}
            </span>
        </p>
        <p>
            <span class="text-muted">
                <i class="bi bi-c-circle"></i>
                Copyright statement
            </span>
            <br>
            {% if asset.copyright_statement %}
                {{ asset.copyright_statement }}
            {% else %}
                n/a
            {% endif %}
        </p>
        <p>
            <span class="text-muted">
                <i class="bi bi-shop-window"></i>
                Dealer
            </span>
            <br>
            {% if asset.dealer %}
                <a href="{% url 'core:dealer-list' %}?highlight=dealer-{{ asset.dealer.id }}">
                    {% if asset.with_costs %}
                        <i title="You paid for this asset." class="bi bi-coin"></i>
                    {% endif %}
                    {{ asset.dealer }}
                </a>
            {% else %}
                n/a
            {% endif %}
        </p>
    </div>
</div>

{% endblock %}
